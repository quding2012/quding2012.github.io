
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>layout · quding0308</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="quding0308">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">


    
    <link rel="next" href="response-chain.html" />
    
    
    <link rel="prev" href="gpu.html" />
    

    </head>
    <body>
        
<div class="gb-page-wrapper">
    <header class="gb-page-header">
        <div class="container">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>


            <a href=".." class="logo">
                <img src="../gitbook/images/logo/128.png">
                <h1>quding0308</h1>
            </a>

            

            
                
                <a href="response-chain.html" class="btn btn-link pull-right hidden-xs">
                    <i class="octicon octicon-chevron-right"></i>
                </a>
                
                
                <a href="gpu.html" class="btn btn-link pull-right hidden-xs">
                    <i class="octicon octicon-chevron-left"></i>
                </a>
                
            
        
        </div>
    </header>

    <div class="gb-page-body">
        <div class="gb-page-inner">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        



    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">概述</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../" class="list-group-item ">
        

            

            

            Introduction

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">计算机基础</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../computer/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            计算机系统

        
        </a>
        

        
    
        
        <a href="../other/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            网络

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">数据结构与算法</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../algorithm/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            算法

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">iOS相关</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../oc/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            Objective-C

        
        </a>
        

        
    
        
        <a href="../swift/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            Swift

        
        </a>
        

        
    
        
        <a href="../ios/basic/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            iOS系统

        
        </a>
        

        
    
        
        <a href="./" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-down"></i>
            

            UI渲染

        
        </a>
        

        
        
    
        
        <a href="screen.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            显示器原理

        
        </a>
        

        
    
        
        <a href="render.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            render

        
        </a>
        

        
    
        
        <a href="cpu.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            cpu渲染

        
        </a>
        

        
    
        
        <a href="gpu.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            gpu渲染

        
        </a>
        

        
    
        
        <a href="layout.html" class="list-group-item active">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            layout

        
        </a>
        

        
    
        
        <a href="response-chain.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            响应链

        
        </a>
        

        
    
        
        <a href="image-render.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            图片解压缩

        
        </a>
        

        
    
        
        <a href="richtext.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            富文本

        
        </a>
        

        
    
        
        <a href="CALayer.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            CALayer子类

        
        </a>
        

        
    
        
        <a href="CoreAnimation.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            CoreAnimation

        
        </a>
        

        
    
        
        <a href="CoreGraphics.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            CoreGraphics

        
        </a>
        

        
    

        
    
        
        <a href="../ios/optimize/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            App优化

        
        </a>
        

        
    
        
        <a href="../mvvm/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            mvvm

        
        </a>
        

        
    
        
        <a href="../ios/bug/" class="list-group-item ">
        

            

            

            常见bug

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">其他</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../web/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            web

        
        </a>
        

        
    
        
        <a href="../android/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            android

        
        </a>
        

        
    
        
        <a href="../other/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            其他

        
        </a>
        

        
    

        </div>
    </div>
    



                    </div>
                    <div class="col-md-9">
                        
<div id="book-search-results">
    <div class="search-noresults">
    
                            
                            <div class="gb-markdown book-page-inner">
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><ul><ul><li><span class="title-icon "></span><a href="#&#x5E03;&#x5C40;&#x66F4;&#x65B0;"><b>1.1.1. </b>&#x5E03;&#x5C40;&#x66F4;&#x65B0;</a></li><li><span class="title-icon "></span><a href="#&#x53C2;&#x8003;&#xFF1A;"><b>1.1.2. </b>&#x53C2;&#x8003;&#xFF1A;</a></li></ul></ul></ul></div><a href="#" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h3 id="&#x5E03;&#x5C40;&#x66F4;&#x65B0;"><a name="&#x5E03;&#x5C40;&#x66F4;&#x65B0;" class="anchor-navigation-ex-anchor" href="#&#x5E03;&#x5C40;&#x66F4;&#x65B0;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. &#x5E03;&#x5C40;&#x66F4;&#x65B0;</h3>
<h4 id="layoutsubviews"><a name="layoutsubviews" class="anchor-navigation-ex-anchor" href="#layoutsubviews"><i class="fa fa-link" aria-hidden="true"></i></a>layoutSubviews</h4>
<p>&#x6B64;&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#x5B50;&#x5143;&#x7D20;&#x7684;&#x4F4D;&#x7F6E;&#x548C;&#x5927;&#x5C0F;&#x3002;&#x5F53;&#x5B50;&#x7C7B;&#x91CD;&#x5199;&#x6B64;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x5B9E;&#x73B0;UI&#x5143;&#x7D20;&#x7684;&#x66F4;&#x7CBE;&#x786E;&#x5E03;&#x5C40;&#x3002;</p>
<p>&#x5F88;&#x591A;&#x65F6;&#x5019;&#x7CFB;&#x7EDF;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;layoutSubviews&#x65B9;&#x6CD5;&#xFF1A;</p>
<ol>
<li>view init&#x521D;&#x59CB;&#x5316;&#x65F6;&#x4E0D;&#x4F1A;&#x8C03;&#x52A8;&#xFF0C;&#x5728; addSubview &#x65F6;&#x4F1A;&#x89E6;&#x53D1;layoutSubviews</li>
<li>view &#x7684; frame &#x6709;&#x53D8;&#x5316;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;<ol>
<li>&#x76F4;&#x63A5;&#x4FEE;&#x6539;frame &#x6216; center </li>
<li>&#x4F7F;&#x7528; Autolayout (&#x5B9E;&#x9645;&#x4E5F;&#x662F;&#x8C03;&#x6574;&#x4E86;view&#x7684;frame)</li>
</ol>
</li>
<li>UIScrollView &#x6EDA;&#x52A8;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;</li>
<li>&#x5C4F;&#x5E55;&#x65CB;&#x8F6C;&#x4F1A;&#x89E6;&#x53D1;</li>
</ol>
<h4 id="setneedslayout"><a name="setneedslayout" class="anchor-navigation-ex-anchor" href="#setneedslayout"><i class="fa fa-link" aria-hidden="true"></i></a>setNeedsLayout</h4>
<p>&#x6807;&#x8BB0;&#x9700;&#x8981;&#x66F4;&#x65B0;layout&#x3002;&#x4FDD;&#x8BC1;&#x5728;&#x4E0B;&#x6B21;&#x8C03;&#x7528;layoutIfNeede&#x65F6;&#x4F1A;&#x8C03;&#x7528; layoutSubviews&#x3002;</p>
<pre><code>Call this method on your application&#x2019;s main thread when you want to adjust the layout of a view&#x2019;s subviews. This method makes a note of the request and returns immediately. Because this method does not force an immediate update, but instead waits for the next update cycle, you can use it to invalidate the layout of multiple views before any of those views are updated. This behavior allows you to consolidate all of your layout updates to one update cycle, which is usually better for performance.

setNeedsLayout makes sure a future call to layoutIfNeeded calls layoutSubviews.
</code></pre><h4 id="layoutifneeded"><a name="layoutifneeded" class="anchor-navigation-ex-anchor" href="#layoutifneeded"><i class="fa fa-link" aria-hidden="true"></i></a>layoutIfNeeded</h4>
<p>&#x5F3A;&#x5236;&#x7ACB;&#x523B;&#x5237;&#x65B0;layout&#xFF0C;&#x9700;&#x8981;&#x9996;&#x5148;&#x8C03;&#x7528; setNeedsLayout&#x3002;</p>
<h4 id="setneedsdisplay"><a name="setneedsdisplay" class="anchor-navigation-ex-anchor" href="#setneedsdisplay"><i class="fa fa-link" aria-hidden="true"></i></a>setNeedsDisplay</h4>
<p>&#x8C03;&#x7528; setNeedsDisplay &#x540E;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x5728;&#x5728;&#x4E0B;&#x6B21;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;&#x4E2D;&#x8C03;&#x7528; drawRect: &#x91CD;&#x65B0;&#x7ED8;&#x5236;&#x3002;</p>
<pre><code>You can use this method or the setNeedsDisplayInRect: to notify the system that your view&#x2019;s contents need to be redrawn.
</code></pre><p>&#x793A;&#x4F8B;&#xFF1A;<a href="http://blog.fujianjin6471.com/2015/06/11/An-example-of-when-should-setNeedsDisplay-be-called.html" target="_blank">http://blog.fujianjin6471.com/2015/06/11/An-example-of-when-should-setNeedsDisplay-be-called.html</a></p>
<p><img src="https://i.stack.imgur.com/i9YuN.png" alt="img"></p>
<h3 id="&#x53C2;&#x8003;&#xFF1A;"><a name="&#x53C2;&#x8003;&#xFF1A;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x8003;&#xFF1A;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. &#x53C2;&#x8003;&#xFF1A;</h3>
<ul>
<li><a href="https://stackoverflow.com/questions/20609206/setneedslayout-vs-setneedsupdateconstraints-and-layoutifneeded-vs-updateconstra" target="_blank">https://stackoverflow.com/questions/20609206/setneedslayout-vs-setneedsupdateconstraints-and-layoutifneeded-vs-updateconstra</a></li>
</ul>

                            </div>
                            
                        
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="gb-page-footer">
        <div class="container">
            <ul class="menu">
                <li class="pull-right">
                    <span class="service-info">Copyright GitBook 2019</span>
                </li>
                <li>
                    <a href="#">Return to the top</a>
                </li>
                <li>
                    <a href="#">Updated Mar 12th 19</a>
                </li>
            </ul>
        </div>
    </footer>
</div>

<script src="../gitbook/gitbook.js"></script>

    
    <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
(function() {
    gitbook.page.hasChanged({"page":{"title":"layout","level":"4.4.5","depth":2,"next":{"title":"响应链","level":"4.4.6","depth":2,"path":"ui/response-chain.md","ref":"ui/response-chain.md","articles":[]},"previous":{"title":"gpu渲染","level":"4.4.4","depth":2,"path":"ui/gpu.md","ref":"ui/gpu.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-fontsettings","-lunr","-search","search-pro","theme-official","anchor-navigation-ex","expandable-chapters","code","expandable-chapters","livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search-pro":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"expandable-chapters":{},"code":{"copyButtons":true},"livereload":{},"highlight":{},"theme-official":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","head_keywords":"quding0308","author":"quding0308","logo":"","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"quding0308","language":"zh-hans","head_title":"quding0308","gitbook":">= 3.0.0","head_description":"quding0308"},"file":{"path":"ui/layout.md","mtime":"2019-03-12T06:02:18.598Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-13T02:17:52.576Z"},"basePath":"..","book":{"language":""}});
})();
</script>

        
    </body>
</html>

