
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>CoreAnimation · quding0308</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="quding0308">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">


    
    <link rel="next" href="CoreGraphics.html" />
    
    
    <link rel="prev" href="CALayer.html" />
    

    </head>
    <body>
        
<div class="gb-page-wrapper">
    <header class="gb-page-header">
        <div class="container">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>


            <a href=".." class="logo">
                <img src="../gitbook/images/logo/128.png">
                <h1>quding0308</h1>
            </a>

            

            
                
                <a href="CoreGraphics.html" class="btn btn-link pull-right hidden-xs">
                    <i class="octicon octicon-chevron-right"></i>
                </a>
                
                
                <a href="CALayer.html" class="btn btn-link pull-right hidden-xs">
                    <i class="octicon octicon-chevron-left"></i>
                </a>
                
            
        
        </div>
    </header>

    <div class="gb-page-body">
        <div class="gb-page-inner">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        



    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">概述</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../" class="list-group-item ">
        

            

            

            Introduction

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">计算机基础</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../computer/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            计算机系统

        
        </a>
        

        
    
        
        <a href="../other/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            网络

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">数据结构与算法</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../algorithm/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            算法

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">iOS相关</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../oc/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            Objective-C

        
        </a>
        

        
    
        
        <a href="../swift/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            Swift

        
        </a>
        

        
    
        
        <a href="../ios/basic/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            iOS系统

        
        </a>
        

        
    
        
        <a href="./" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-down"></i>
            

            UI渲染

        
        </a>
        

        
        
    
        
        <a href="screen.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            显示器原理

        
        </a>
        

        
    
        
        <a href="render.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            render

        
        </a>
        

        
    
        
        <a href="cpu.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            cpu渲染

        
        </a>
        

        
    
        
        <a href="gpu.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            gpu渲染

        
        </a>
        

        
    
        
        <a href="layout.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            layout

        
        </a>
        

        
    
        
        <a href="response-chain.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            响应链

        
        </a>
        

        
    
        
        <a href="image-render.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            图片解压缩

        
        </a>
        

        
    
        
        <a href="richtext.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            富文本

        
        </a>
        

        
    
        
        <a href="CALayer.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            CALayer子类

        
        </a>
        

        
    
        
        <a href="CoreAnimation.html" class="list-group-item active">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            CoreAnimation

        
        </a>
        

        
    
        
        <a href="CoreGraphics.html" class="list-group-item ">
        

            
            <i class="octicon octicon-chevron-down" style="opacity: 0"></i>
            

            

            CoreGraphics

        
        </a>
        

        
    

        
    
        
        <a href="../ios/optimize/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            App优化

        
        </a>
        

        
    
        
        <a href="../mvvm/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            mvvm

        
        </a>
        

        
    
        
        <a href="../ios/bug/" class="list-group-item ">
        

            

            

            常见bug

        
        </a>
        

        
    

        </div>
    </div>
    
    <div class="panel panel-default">
        
        <div class="panel-heading">
            <h3 class="panel-title">其他</h3>
        </div>
        

        <div class="list-group">
            
    
        
        <a href="../web/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            web

        
        </a>
        

        
    
        
        <a href="../android/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            android

        
        </a>
        

        
    
        
        <a href="../other/" class="list-group-item ">
        

            

            
            <i class="octicon octicon-chevron-right"></i>
            

            其他

        
        </a>
        

        
    

        </div>
    </div>
    



                    </div>
                    <div class="col-md-9">
                        
<div id="book-search-results">
    <div class="search-noresults">
    
                            
                            <div class="gb-markdown book-page-inner">
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><ul><li><span class="title-icon "></span><a href="#core-animation"><b>1.1. </b>Core Animation</a></li><ul><li><span class="title-icon "></span><a href="#&#x76F8;&#x5173;&#x7C7B;"><b>1.1.1. </b>&#x76F8;&#x5173;&#x7C7B;</a></li><li><span class="title-icon "></span><a href="#catransaction"><b>1.1.2. </b>CATransaction</a></li><li><span class="title-icon "></span><a href="#calayer"><b>1.1.3. </b>CALayer</a></li><li><span class="title-icon "></span><a href="#&#x53C2;&#x8003;"><b>1.1.4. </b>&#x53C2;&#x8003;</a></li></ul></ul></ul></div><a href="#" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h2 id="core-animation"><a name="core-animation" class="anchor-navigation-ex-anchor" href="#core-animation"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Core Animation</h2>
<pre><code>Core Animation provides high frame rates and smooth animations without burdening the CPU and slowing down your app. Most of the work required to draw each frame of an animation is done for you. You configure animation parameters such as the start and end points, and Core Animation does the rest, handing off most of the work to dedicated graphics hardware, to accelerate rendering.
</code></pre><p>Core Animation &#x81EA;&#x8EAB;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7ED8;&#x56FE;&#x7CFB;&#x7EDF;&#x3002;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8D1F;&#x8D23;&#x5728;&#x786C;&#x4EF6;&#x4E0A;&#x5408;&#x6210;&#x548C;&#x64CD;&#x7EB5;&#x5E94;&#x7528;&#x5185;&#x5BB9;&#x7684; Framework &#x3002; Core Animation &#x7684;&#x6838;&#x5FC3;&#x662F;&#x56FE;&#x5C42;&#x5BF9;&#x8C61;&#xFF0C;&#x56FE;&#x5C42;&#x5BF9;&#x8C61;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x548C;&#x64CD;&#x63A7;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x5185;&#x5BB9;&#x3002;&#x56FE;&#x5C42;&#x5C06;&#x6355;&#x83B7;&#x7684;&#x5185;&#x5BB9;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x4F4D;&#x56FE;&#x4E2D;&#xFF0C;&#x56FE;&#x5F62;&#x786C;&#x4EF6;&#x80FD;&#x591F;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x7684;&#x64CD;&#x63A7;&#x4F60;&#x7684;&#x4F4D;&#x56FE;&#x3002;&#x5728;&#x5927;&#x90E8;&#x5206;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x56FE;&#x5C42;&#x88AB;&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x7BA1;&#x7406;&#x89C6;&#x56FE;&#x5185;&#x5BB9;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x6807;&#x51C6;&#x7684;&#x56FE;&#x5C42;&#xFF0C;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x81EA;&#x8EAB;&#x7684;&#x9700;&#x8981;&#x3002;</p>
<p>&#x4F60;&#x4F7F;&#x7528;Core Animation&#x521B;&#x5EFA;&#x7684;&#x5927;&#x90E8;&#x5206;&#x52A8;&#x753B;&#x90FD;&#x5305;&#x542B;&#x5BF9;&#x56FE;&#x5C42;&#x5C5E;&#x6027;&#x7684;&#x66F4;&#x6539;&#x3002;&#x50CF;&#x89C6;&#x56FE;&#x4E00;&#x6837;&#xFF0C;&#x56FE;&#x5C42;&#x5BF9;&#x8C61;&#x4E5F;&#x5177;&#x6709;&#x8FB9;&#x6846;&#x77E9;&#x5F62;&#x3001;&#x5750;&#x6807;&#x539F;&#x70B9;&#x3001;&#x5C3A;&#x5BF8;&#x3001;&#x4E0D;&#x900F;&#x660E;&#x5EA6;&#x3001;&#x53D8;&#x6362;&#x77E9;&#x9635;&#x4EE5;&#x53CA;&#x8BB8;&#x591A;&#x5176;&#x4ED6;&#x9762;&#x5411;&#x53EF;&#x89C6;&#x7684;&#x5C5E;&#x6027;&#xFF08;&#x5982;backgroundColor&#xFF09;&#x3002;&#x5927;&#x90E8;&#x5206;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x7684;&#x503C;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#x90FD;&#x5C06;&#x4F1A;&#x89E6;&#x53D1;&#x9690;&#x5F0F;&#x52A8;&#x753B;&#x88AB;&#x521B;&#x5EFA;&#x3002;&#x9690;&#x5F0F;&#x52A8;&#x753B;&#x662F;&#x4E00;&#x79CD;&#x4ECE;&#x65E7;&#x5C5E;&#x6027;&#x503C;&#x52A8;&#x753B;&#x5230;&#x65B0;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x52A8;&#x753B;&#x5F62;&#x5F0F;&#x3002;</p>
<h3 id="&#x76F8;&#x5173;&#x7C7B;"><a name="&#x76F8;&#x5173;&#x7C7B;" class="anchor-navigation-ex-anchor" href="#&#x76F8;&#x5173;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. &#x76F8;&#x5173;&#x7C7B;</h3>
<ul>
<li>CATransaction &#x4E8B;&#x52A1;&#x7C7B;,&#x53EF;&#x4EE5;&#x5BF9;&#x591A;&#x4E2A;layer&#x7684;&#x5C5E;&#x6027;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x4FEE;&#x6539;.&#x5B83;&#x5206;&#x9690;&#x5F0F;&#x4E8B;&#x52A1;,&#x548C;&#x663E;&#x5F0F;&#x4E8B;&#x52A1;.</li>
<li>CAAnimationGroup &#x5141;&#x8BB8;&#x591A;&#x4E2A;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;</li>
<li>CABasicAnimation &#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x5355;&#x4E00;&#x52A8;&#x753B;&#x7684;&#x5B9E;&#x73B0;</li>
<li>CAKeyframeAnimation &#x5173;&#x952E;&#x6862;&#x52A8;&#x753B;,&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x884C;&#x52A8;&#x8DEF;&#x7EBF;</li>
<li>CAConstraint &#x7EA6;&#x675F;&#x7C7B;,&#x5728;&#x5E03;&#x5C40;&#x7BA1;&#x7406;&#x5668;&#x7C7B;&#x4E2D;&#x7528;&#x5B83;&#x6765;&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;</li>
<li>CAConstraintLayoutManager &#x7EA6;&#x675F;&#x5E03;&#x5C40;&#x7BA1;&#x7406;&#x5668;,&#x662F;&#x7528;&#x6765;&#x5C06;&#x591A;&#x4E2A;CALayer&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#x7684;.&#x5404;&#x4E2A;CALayer&#x662F;&#x901A;&#x8FC7;&#x540D;&#x79F0;&#x6765;&#x533A;&#x5206;,&#x800C;&#x5E03;&#x5C40;&#x5C5E;&#x6027;&#x662F;&#x901A;&#x8FC7;CAConstraint&#x6765;&#x8BBE;&#x7F6E;&#x7684;.</li>
</ul>
<h3 id="catransaction"><a name="catransaction" class="anchor-navigation-ex-anchor" href="#catransaction"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. CATransaction</h3>
<p>/* Transactions are CoreAnimation&apos;s mechanism for batching multiple layer-</p>
<ul>
<li>tree operations into atomic updates to the render tree. Every</li>
<li>modification to the layer tree requires a transaction to be part of.
*</li>
<li>CoreAnimation supports two kinds of transactions, &quot;explicit&quot; transactions</li>
<li>and &quot;implicit&quot; transactions.
*</li>
<li>Explicit transactions are where the programmer calls `[CATransaction</li>
<li>begin]&apos; before modifying the layer tree, and `[CATransaction commit]&apos;</li>
<li>afterwards.
*</li>
<li>Implicit transactions are created automatically by CoreAnimation when the</li>
<li>layer tree is modified by a thread without an active transaction.</li>
<li>They are committed automatically when the thread&apos;s run-loop next</li>
<li>iterates. In some circumstances (i.e. no run-loop, or the run-loop</li>
<li>is blocked) it may be necessary to use explicit transactions to get</li>
<li>timely render tree updates. */</li>
</ul>
<p>CATransaction &#x662F; Core Animation &#x4E2D;&#x7684;&#x4E8B;&#x52A1;&#x7C7B;&#xFF0C;&#x5728; iOS &#x4E2D;&#x7684;&#x56FE;&#x5C42;&#x4E2D;&#xFF0C;&#x56FE;&#x5C42;&#x7684;&#x6BCF;&#x4E2A;&#x6539;&#x53D8;&#x90FD;&#x662F;&#x4E8B;&#x52A1;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<p>CATransaction&#x53EF;&#x4EE5;&#x5BF9;&#x591A;&#x4E2A;layer&#x7684;&#x5C5E;&#x6027;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x540C;&#x65F6;&#x8D1F;&#x8D23;&#x6210;&#x6279;&#x7684;&#x628A;&#x591A;&#x4E2A;&#x56FE;&#x5C42;&#x6811;&#x7684;&#x4FEE;&#x6539;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x539F;&#x5B50;&#x66F4;&#x65B0;&#x5230;&#x6E32;&#x67D3;&#x6811;&#x3002;</p>
<p>CATransaction&#x4E8B;&#x52A1;&#x7C7B;&#x5206;&#x4E3A;&#x9690;&#x5F0F;&#x4E8B;&#x52A1;&#x548C;&#x663E;&#x5F0F;&#x4E8B;&#x52A1;&#xFF0C;&#x6CE8;&#x610F;&#x4EE5;&#x4E0B;&#x4E24;&#x7EC4;&#x6982;&#x5FF5;&#x7684;&#x533A;&#x5206;&#xFF1A;</p>
<ol>
<li><p>&#x9690;&#x5F0F;&#x52A8;&#x753B;&#x548C;&#x9690;&#x5F0F;&#x4E8B;&#x52A1;: &#x9690;&#x5F0F;&#x52A8;&#x753B;&#x901A;&#x8FC7;&#x9690;&#x5F0F;&#x4E8B;&#x52A1;&#x5B9E;&#x73B0;&#x52A8;&#x753B;</p>
</li>
<li><p>&#x663E;&#x5F0F;&#x52A8;&#x753B;&#x548C;&#x663E;&#x5F0F;&#x4E8B;&#x52A1;: &#x663E;&#x5F0F;&#x52A8;&#x753B;&#x6709;&#x591A;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF0C;&#x663E;&#x5F0F;&#x4E8B;&#x52A1;&#x662F;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x663E;&#x5F0F;&#x52A8;&#x753B;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
</li>
</ol>
<p>UIView&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x52A8;&#x753B;&#x7684;&#x5C5E;&#x6027;&#xFF1A;</p>
<pre><code>- frame &amp; bounds &amp; center
- transform&#x3001;scale&#x3001;rotate
- alpha
- backgroundColor
</code></pre><pre><code class="lang-c"><span class="hljs-comment">//&#x57FA;&#x672C;</span>
UIView.animateWithDuration(<span class="hljs-number">0.5</span>, animations: {
  self.yourView.bounds.size.witdh += <span class="hljs-number">70.0</span>
  self.yourView.backgroundColor = UIColor.greenColor()
  self.yourView.alpha = <span class="hljs-number">0.5</span>
})
<span class="hljs-comment">//View&#x548C;View&#x4E4B;&#x95F4;&#x7684;&#x8FC7;&#x6E21;</span>
UIView.transitionWithView(containerView, duration: <span class="hljs-number">0.2</span>, options: .TransitionFlipFromLeft, animations: { _ in fromView.removeFromSuperview(); containerView.addSubview(toView) }, completion: nil)

<span class="hljs-comment">//&#x5165;&#x95E8;Option,delay,option&#x81EA;&#x7531;&#x9009;&#x62E9;</span>
UIView.animateWithDuration(<span class="hljs-number">0.5</span>, delay: <span class="hljs-number">0.4</span>, options: .Repeat, animations:{
    self.yourView.center.x + = <span class="hljs-number">30.0</span>
},completion: nil)

<span class="hljs-comment">//&#x8FDB;&#x9636;&#xFF0C;Spring&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x52A8;&#x753B;&#x7684;&#x5F39;&#x7C27;&#x6548;&#x679C;</span>
UIView.animateWithDuration(<span class="hljs-number">1.5</span>, delay: <span class="hljs-number">0.0</span>, usingSpringWithDamping: <span class="hljs-number">0.2</span>, initialSpringVelocity: <span class="hljs-number">0.0</span>, options: nil, animations: {
self.loginButton.bounds.size.width += <span class="hljs-number">80.0</span> 
label&#x7684;&#x6587;&#x5B57;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x8FC7;&#x6E21;&#x6548;&#x679C;
}, completion: nil)

<span class="hljs-comment">//&#x9AD8;&#x9636;&#xFF0C;&#x590D;&#x6742;&#x52A8;&#x753B;&#x7EC4;&#x5408;&#x4E4B;KeyFrame</span>
UIView.animateKeyframesWithDuration(<span class="hljs-number">1.5</span>, delay: <span class="hljs-number">0.0</span>, options: nil, animations: {
<span class="hljs-comment">//&#x6DFB;&#x52A0;KeyFrames&#xFF0C;options&#x4E2D;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4E0D;&#x540C;&#x7684;&#x9650;&#x5236;</span>
<span class="hljs-comment">//1</span>
UIView.addKeyframeWithRelativeStartTime(<span class="hljs-number">0.0</span>, relativeDuration: <span class="hljs-number">0.25</span>, animations: {
self.planeImage.center.x += <span class="hljs-number">80.0</span>
self.planeImage.center.y -= <span class="hljs-number">10.0</span> 
})
<span class="hljs-comment">//2</span>
UIView.addKeyframeWithRelativeStartTime(<span class="hljs-number">0.1</span>, relativeDuration: <span class="hljs-number">0.4</span>) { self.planeImage.transform = CGAffineTransformMakeRotation(CGFloat(-
M_PI_4/<span class="hljs-number">2</span>)) }
}, completion: nil)
</code></pre>
<h3 id="calayer"><a name="calayer" class="anchor-navigation-ex-anchor" href="#calayer"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. CALayer</h3>
<p>layer &#x5185;&#x90E8;&#x7EF4;&#x62A4;&#x7740;&#x4E09;&#x5206; layer tree</p>
<ul>
<li>model Layer Tree(&#x6A21;&#x578B;&#x6811;)</li>
<li>presentation Layer Tree</li>
<li>Render Layer Tree (&#x6E32;&#x67D3;&#x6811;)</li>
</ul>
<h4 id="&#x52A8;&#x753B;&#x6548;&#x679C;"><a name="&#x52A8;&#x753B;&#x6548;&#x679C;" class="anchor-navigation-ex-anchor" href="#&#x52A8;&#x753B;&#x6548;&#x679C;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x52A8;&#x753B;&#x6548;&#x679C;</h4>
<ul>
<li>size &amp; position&#x6539;&#x53D8;layer&#x7684;&#x4F4D;&#x7F6E;&#x53CA;&#x81EA;&#x8EAB;&#x5927;&#x5C0F;</li>
<li>transform&#x6539;2D,3D&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x73B0;&#x5B9E;&#x6548;&#x679C;</li>
<li>shadow&#x6539;&#x53D8;&#x9634;&#x5F71;</li>
<li>border&#x8FB9;&#x6846;&#x6548;&#x679C;</li>
<li>opacity&#x6539;&#x5176;&#x900F;&#x660E;&#x5EA6;</li>
</ul>
<pre><code>//&#x8BB0;&#x5F97;&#x5F15;&#x5165;QuartzCore
//&#x57FA;&#x672C;
let ownStyle = CABasicAnimation(keyPath:&quot;position.x&quot;)
ownStyle.fromValue = -view.bounds.size.width/2
ownStyle.toValue = view,bounds.size.width/2
ownStyle.duration = 0.5
yourView.layer.addAnimation(ownStyle, forKey: nil)
//&#x5165;&#x95E8;&#xFF0C;&#x52A8;&#x753B;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x65F6;&#x95F4;&#x5DEE;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;fillMode&#x548C;beginTime&#x6765;&#x5B9E;&#x73B0;&#x7279;&#x5B9A;&#x6548;&#x679C;
ownStyle.beginTime = CACurrentMediaTime() + 0.3
ownStyle.fillMode = KCAFillModeRemoved //default
//kCAFillMode&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x63A7;&#x5236;&#x4F60;&#x52A8;&#x753B;&#x5728;&#x5F00;&#x59CB;&#x548C;&#x7ED3;&#x675F;&#x65F6;&#x5019;&#x7684;&#x4E00;&#x4E9B;&#x6548;&#x679C;
//&#x8FDB;&#x9636; CAAnimation delegate pattern
func animationDidStop &amp; animationDidStart
//&#x4E0E;block&#x4E2D;&#x7684;&#x76F8;&#x7C7B;&#x4F3C;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5229;&#x7528;KVC&#x7279;&#x6027;&#x8BBE;&#x7F6E;&#x76F8;&#x5E94;&#x5185;&#x5BB9;
ownStyle.setValue(yourView.layer, forKey:&quot;layer&quot;)
ownStyle.setValue(&quot;name&quot;, forKey:&quot;form&quot;)
override func animationStop(anima: CAAnimation!, finished flag: Bool) {
    if let name = ownStyle.valueForKey(&quot;form&quot;) as? String {
        if name = &quot;form&quot; {
            //add new animation and add it to the layer
        }   
    }
}
//addAnimation&#x4E2D;&#x7684;Key&#x4F5C;&#x7528;&#xFF0C;&#x6807;&#x793A;&#x52A8;&#x753B;&#xFF0C;&#x5728;&#x6070;&#x5F53;&#x7684;&#x65F6;&#x5019;&#x79FB;&#x9664;&#x5BF9;&#x5E94;&#x52A8;&#x753B;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x79FB;&#x9664;&#x52A8;&#x753B;&#x6548;&#x679C;&#x672C;&#x8EAB;

//&#x9AD8;&#x9636;&#xFF0C;AnimationGroup
let groupAnimation = CAAnimationGroup()
let oneAnimation = CABasicAnimation(keyPath:&quot;transform.scale&quot;)
//blablabla
let twoAnimation = CABasicAnimation(keyPath:&quot;opacity&quot;)
//detail set for twoAnimation
//sey timingFunction
groupAnimation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)
//&#x8FD9;&#x4E48;&#x53EA;&#x80FD;&#x4E00;&#x8D77;&#x505A;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5185;&#x90E8;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x987A;&#x5E8F;
groupAnimation.animations = [oneAnimation, twoAnimation] 
yourView.layer.addAnimation(groupAnimation, forKey: nil)
//CAKeyFrame,&#x5173;&#x952E;&#x5E27;&#x52A8;&#x753B;Layer&#x7EA7;&#x522B;&#x6548;&#x679C;
let wobble = CAKeyframeAnimation(keyPath: &quot;transform.rotation&quot;) wobble.duration = 0.25
wobble.repeatCount = 4
//&#x6BD4;View&#x7684;keyFrame&#x8BBE;&#x7F6E;&#x65B9;&#x4FBF;&#x591A;&#x4E86;
//values&#x4E0E;keyTimes&#x4E00;&#x4E00;&#x5BF9;&#x5E94;
wobble.values = [0.0, -M_PI_4/4, 0.0, M_PI_4/4, 0.0]
wobble.keyTimes = [0.0, 0.25, 0.5, 0.75, 1.0] heading.layer.addAnimation(wobble, forKey: nil)
//&#x4E0D;&#x8FC7;&#x5751;&#x7239;&#x7684;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x6BD4;&#x5982;CGPoint&#xFF0C;CGSize&#xFF0C;CGRect&#xFF0C;CATransform3D&#xFF0C;&#x90FD;&#x8981;&#x89E3;&#x5305;
let move = CABasicAnimation(keyPath: &quot;position&quot;)
move.duration = 1.0
move.fromValue = NSValue(CGPoint:CGPoint(x:100.0, y:100.0))
move.toValue = NSValue(CGPoint:CGPoint(x:200.0, y:200.0))
</code></pre><p>position
bounds</p>
<h3 id="&#x53C2;&#x8003;"><a name="&#x53C2;&#x8003;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x8003;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.4. &#x53C2;&#x8003;</h3>
<ul>
<li><a href="http://studentdeng.github.io/blog/2014/06/24/core-animation/" target="_blank">http://studentdeng.github.io/blog/2014/06/24/core-animation/</a></li>
<li><a href="https://www.calayer.com/core-animation/2016/05/17/catransaction-in-depth.html#flushing-transactions" target="_blank">https://www.calayer.com/core-animation/2016/05/17/catransaction-in-depth.html#flushing-transactions</a></li>
<li><a href="https://lision.me/ios_rendering_process/" target="_blank">https://lision.me/ios_rendering_process/</a></li>
<li><a href="https://blog.ibireme.com/2015/05/18/runloop/" target="_blank">https://blog.ibireme.com/2015/05/18/runloop/</a></li>
</ul>

                            </div>
                            
                        
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="gb-page-footer">
        <div class="container">
            <ul class="menu">
                <li class="pull-right">
                    <span class="service-info">Copyright GitBook 2019</span>
                </li>
                <li>
                    <a href="#">Return to the top</a>
                </li>
                <li>
                    <a href="#">Updated Aug 22nd 19</a>
                </li>
            </ul>
        </div>
    </footer>
</div>

<script src="../gitbook/gitbook.js"></script>

    
    <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
    

    
    <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
(function() {
    gitbook.page.hasChanged({"page":{"title":"CoreAnimation","level":"4.4.10","depth":2,"next":{"title":"CoreGraphics","level":"4.4.11","depth":2,"path":"ui/CoreGraphics.md","ref":"ui/CoreGraphics.md","articles":[]},"previous":{"title":"CALayer子类","level":"4.4.9","depth":2,"path":"ui/CALayer.md","ref":"ui/CALayer.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-fontsettings","-lunr","-search","search-pro","theme-official","anchor-navigation-ex","expandable-chapters","code","expandable-chapters","livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search-pro":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"expandable-chapters":{},"code":{"copyButtons":true},"livereload":{},"highlight":{},"theme-official":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","head_keywords":"quding0308","author":"quding0308","logo":"./docs/asserts/img/favicon.ico","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"quding0308","language":"zh-hans","head_title":"quding0308","gitbook":">= 3.0.0","head_description":"quding0308"},"file":{"path":"ui/CoreAnimation.md","mtime":"2019-08-22T08:03:25.142Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-13T02:20:04.831Z"},"basePath":"..","book":{"language":""}});
})();
</script>

        
    </body>
</html>

